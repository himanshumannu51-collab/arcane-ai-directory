const TOOLS_URL='tools.json';let tools=[];let shown=0;const PAGE=9;
async function init(){try{const r=await fetch(TOOLS_URL);tools=await r.json();renderTools(tools.slice(0,PAGE));renderTrending();}catch(e){console.error(e);document.getElementById('tools-grid').innerHTML='<p style="color:#c00">Failed to load tools.json</p>'}}
function renderTrending(){const tags=new Set();tools.slice(0,40).forEach(t=>t.tags.forEach(tag=>tags.add(tag)));const el=document.getElementById('tools-grid');}
function renderTools(list){shown=list.length;const grid=document.getElementById('tools-grid');grid.innerHTML='';list.slice(0,PAGE).forEach(t=>grid.appendChild(card(t)));document.getElementById('load-more').style.display=list.length>PAGE?'inline-block':'none'}
function card(t){const d=document.createElement('div');d.className='card';d.innerHTML=`<img src="${t.image}" alt="${t.name}"/><div class="meta"><div class="name">${t.name}</div><div class="cat">${t.category}</div></div><div class="desc">${t.description}</div>`;d.onclick=()=>openModal(t);return d}
document.getElementById('load-more').addEventListener('click',()=>{const next=tools.slice(shown,shown+PAGE);const grid=document.getElementById('tools-grid');next.forEach(t=>grid.appendChild(card(t)));shown+=next.length;if(shown>=tools.length)document.getElementById('load-more').style.display='none'})
document.getElementById('search-btn').addEventListener('click',()=>{const q=document.getElementById('search-input').value.trim().toLowerCase();if(!q)return renderTools(tools);const out=tools.filter(t=>(t.name+t.description+(t.tags||[]).join(' ')).toLowerCase().includes(q));renderTools(out)})
function openModal(t){const m=document.getElementById('modal');document.getElementById('modal-content').innerHTML=`<div style="display:flex;gap:16px;align-items:flex-start"><img src="${t.image}" style="width:260px;border-radius:8px"/><div><h3>${t.name}</h3><p style="color:#64748b">${t.description}</p><p><strong>Category:</strong> ${t.category}</p><p style="margin-top:8px"><a href="${t.link}" target="_blank">Visit â†’</a></p></div></div>`;m.setAttribute('aria-hidden','false');document.body.style.overflow='hidden'}
document.getElementById('modal-close').addEventListener('click',closeModal);document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')closeModal()});function closeModal(){document.getElementById('modal').setAttribute('aria-hidden','true');document.body.style.overflow=''};init();